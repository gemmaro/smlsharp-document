\chapter{\txt{\smlsharp{}パッケージの構造}{The Structure of \smlsharp{} Distribution}}
\label{chap:package}

\ifjp%>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
	\smlsharp{}配布パッケージ\code{smlsharp-2.0.0.tar.gz}は，
\smlsharp{}コンパイラ，基本ライブラリ，サポートツールのソースを含む．
	本章では，\code{smlsharp-2.0.0.tar.gz}の構造を記述する．
\else%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\smlsharp{} distribution packabe \code{smlsharp-2.0.0.tar.gz}
contains the sources and other resources for the \smlsharp{} compiler,
the Standard ML Basis library, and several supporting tools.
	This chapter describes the major components of
\code{smlsharp-2.0.0.tar.gz}.
\fi%%%%<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

\section{\txt
{\smlsharp{}ソースパッケージの構成}
{The Source Distribution of the \smlsharp{} Compiler}
}

\ifjp%>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
	\smlsharp{}のソースディストリビューション
\code{smlsharp-2.0.0.tar.gz}には以下のファイルが含まれる．

\begin{tabular}{ll}
\code{src/} &  ソースファイルディレクトリ\\
\code{sample/}& サンプルプログラムディレクトリ\\
\code{benchmark/}& Standard MLベンチマークソース．\\
\code{test/}& テストのためのリソースディレクトリ．（将来整備予定．）\\
\code{precompiled/}& \code{minismlsharp}のアセンブリソースファイル\\
\code{configure.ac}& \code{autoconf}への入力ファイル\\
\code{Makefile.in}& \code{Makefile}ファイルテンプレート\\
\code{config.h.in}& \code{config.h}ファイルテンプレート\\
\code{config.mk.in}& \code{Makefile}の動作を制御する\code{config.mk}ファイルテンプレート\\
\code{depend.mk}& \code{Makefile}で参照されるファイルの依存関係を記述したファイル．\\
\code{files.mk}& \code{Makefile}で参照される種々のファイル集合定数の定義ファイル．\\
\code{mkdepend}& \code{depend.mk}を作成に使用するスクリプト．\\
\code{precompile.mk}& \code{precompiled/}再構築用\code{make}ファイルスクリプト．\\
\code{RELEASE\_DATE} & リリース版日付\\
\code{VERSION} & バージョン\\
\code{Changes} & リリース情報ファイル\\
\code{INSTALL} & インストール手順の記述\\
\code{LICENSE} & \smlsharp{}ライセンス
\end{tabular}
\else%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\smlsharp{} source sidtribution package 
\code{smlsharp-2.0.0.tar.gz} contains the following files and
directories.

\begin{tabular}{ll}
\code{src/} & the source directory
\\
\code{sample/} & sample programs
\\
\code{benchmark/} & Standard ML benchmark programs.
\\
\code{test/} & a unit test framework. (Currently not functional; it will
be activated in future.)
\\
\code{precompiled/} & assembry file archives to build
\code{minismlsharp} for compiling \smlsharp{} source codes.
\\
\code{configure.ac} & input to \code{autoconf}
\\
\code{Makefile.in} & \code{Makefile} tamplate.
\\
\code{config.h.in} & \code{config.h} tamplate.
\\
\code{config.mk.in} &
	\code{config.mk} template containing configuration parameters used in \code{Makefile}.
\\
\code{files.mk} & Auto-generated file that defines variables used in
\code{Makefile}.
\\
\code{mkdepend} & The shell script for generating \code{depend.mk}
\\
\code{precompile.mk} & a \code{make} script for generating
    \code{precompiled/} acrchives.
\\
\code{RELEASE\_DATE} & the release date
\\
\code{VERSION} &  the current version
\\
\code{Changes} &  the change history
\\
\code{INSTALL} & install instructions
\\
\code{LICENSE} & \smlsharp{} license
\end{tabular}
\fi%%%%<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

\section{\txt
{\smlsharp{} ソースツリー}
{The \smlsharp{} Source Tree}
}

\ifjp%>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
	\smlsharp{}コンパイラのソースは，\code{src}ディレクトリ下の以下
の各ディレクトリに分割して格納されている．

\begin{tabular}{ll}
\code{compiler/} & \smlsharp{}コンパイラ
\\
\code{basis/} & Standard ML基本ライブラリ
\\
\code{compiler-utils/} & \smlsharp{}コンパイラが使用する汎用ライブラリ
\\
\code{config/} & \code{configure}が設定するシステムパラメタアクセスライブラリ．
\\
\code{ffi/} & \smlsharp{}のＣ言語インターフェイスサポートライブラリ．
\\
\code{reifiedterm/} & コンパイラ環境にアクセスするための自己反映ライブラリ．
\\
\code{sql/} & \smlsharp{}のＳＱＬ統合機能を使用するためのサポートライブラリ．
\\
\code{unix-utils/}& Unixの基本コマンドライブラリ．
\\
\code{runtime/} & \smlsharp{}実行時環境．
\\
\code{llvm/} & LLVMコード生成ライブラリ．
\\
\code{smlnj/} & \smlsharp{}が使用している\code{smlnj}のStandard ML基本ライブラリソースファイル．
\\
\code{smlnj-lib/} & \code{smlnj}のユーティリティライブラリ．
\\
\code{smlformat/} & プリンター自動生成ツール\code{smlsormat}．
\\
\code{ml-lex/} & \code{smllex}ソースファイル．
\\
\code{ml-yacc/} & \code{smlyacc}ソースファイル．
\\
\code{basis.smi} & 基本ライブラリのインターフェイルファイル．
\\
\code{builtin.smi} & コンパイラの組込環境の設定ファイル．
\\
\code{prelude.smi} & \smlsharp{}の対話型環境のインターフェイスファイル．
\\
\code{ffi.smi} & Ｃ連携機能の利用のためのインターフェイルファイル．
\\
\code{sql.smi} & SQL統合機能の利用のためのインターフェイルファイル．
\\
\code{smlformat-lib.smi} & \code{smlformat}のライブラリインターフェイスファイル．
\\
\code{ml-yacc-lib.smi} & \code{smlyacc}のライブラリインターフェイスファイル．
\\
\code{config.mk.in} & コンパイラの\code{make}環境設定用テンプレートファイル．
\end{tabular}

\else%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\code{src} directory contains the sources for the following.

\begin{tabular}{ll}
\code{compiler/}& the \smlsharp{} compiler
\\
\code{basis/}&  the Standard ML Basis Library
\\
\code{compiler-utils/}&  basic libraries ussed in the \smlsharp{} compiler
\\
\code{config/}& the to access \code{configure} parameters
\\
\code{ffi/}&  a support library for \smlsharp{} C interface
\\
\code{reifiedterm/}& a reflection library to access access \smlsharp{}
    compiler environments.
\\
\code{sql/}& a support library for \smlsharp{} SQL integration
\\
\code{unix-utils/}& basic Unix command libraries
\\
\code{runtime/}&  the \smlsharp{} runtime system
\\
\code{smlformat/}&  the pretty printer generator
\\
\code{smlnj/}&  SMLNJ sources for Standard ML Basis Library used by the \smlsharp{}
\\
\code{smlnj-lib/}&  \code{smlnj} utility libraries
\\
\code{ml-lex/}& \code{smllex} addapted from Tarditi and Appel implementation
\\
\code{ml-yacc/}& \code{smlyacc} addapted from Tarditi and Appel implementation
\\
\code{basis.smi}&  the interface file to bind the Standard ML Basis Library
\\
\code{builtin.smi}& the interface file used in \smlsharp{} to set up its
    builtin environment
\\
\code{ffi.smi}&  the interface file to enable C language FFI
\\
\code{ml-yacc-lib.smi}&  the interface file to load \code{smlyacc} resources
\\
\code{prelude.smi}&  the interface file to set up the initial interactive environment
\\
\code{smlformat-lib.smi}& the interface file to load \code{smlformat} resources
\\
\code{sql.smi}& the interface file to enable SQL integration
\\
\code{config.mk.in}&  a template file to set up \code{make} parameters
\\
\end{tabular}
\fi%%%%<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

\section{\txt{\code{compiler}ディレクトリ}{The \code{compiler} Directory}}
\ifjp%>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
	\smlsharp{}コンパイラ本体のソースファイルのディレクトリである．
	このディレクトリは，以下に示すコンパイラのフェーズや中間言語等の
主要なデータ構造毎にサブディレクトリに分割されている．
\begin{enumerate}
\item 
	コンパイラの中間言語

\begin{tabular}{ll}
\code{absyn/}& 抽象構文木
\\
\code{constantterm/}& コンスタント定義
\\
\code{patterncalc/}& 型無し中間表現
\\
\code{types/}& 型定義，IDを変数名とする型無し中間言語
\\
\code{typedcalc/}& 型付き中間言語
\\
\code{recordcalc/}& 型付きレコード計算
\\
\code{typedlambda/}& 型付きラムダ計算
\\
\code{bitmapcalc/}& ビットマップを明示した中間言語
\\
\code{closurecalc/}& クロージャ中間言語
\\
\code{runtimetypes/}& 実行時型表現
\\
\code{runtimecalc/}& 低レベル中間言語
\\
\code{anormal/}& A-normal中間言語
\\
\code{machinecode/}& 低レベルコード言語
\\
\code{llvmir/}& LLVMコード
\end{tabular}

\item コンパイルフェーズ 

\begin{tabular}{ll}
\code{main/}& メインモジュール
\\
\code{toplevel2/}& コンパイラトップレベル
\\
\code{parser2/}& 構文解析
\\
\code{loadfile/}& インターフェイスローディング処理
\\
\code{generatemain/}& メイン関数名生成処理
\\
\code{elaborate/}& 構文論的評価
\\
\code{nameevaluation/}& 名前評価とモジュールコンパイル
\\
\code{valrecoptimization/}& 相互再帰的関数最適化処理
\\
\code{reflection/}& コンパイラ環境の自己反映処理，プリンタ生成処理
\\
\code{typeinference2/}& 型推論，カリー関数最適化
\\
\code{typedcalcoptimization/}& 型付き中間言語最適化
\\
\code{matchcompilation/}& パターンマッチングコンパイル
\\
\code{sqlcompilation/}& 型依存SQLコンパイル
\\
\code{fficompilation/}&  Ｃ言語連携コンパイル
\\
\code{recordcompilation/}& 型主導レコードコンパイル
\\
\code{recordcalcoptimization/}& 型付きレコード計算最適化処理
\\
\code{datatypecompilation/}& データ型コンパイル
\\
\code{bitmapcompilation2/}& ビットマップ生成
\\
\code{closureconversion/}& クロージャ変換
\\
\code{cconvcompile/}& コーリングコンベンションコンパイル
\\
\code{anormalize/}& A-normal変換
\\
\code{machinecodegen/}&  低レベルコード生成
\\
\code{stackallocation/}& スタックフレーム割り当て
\\
\code{llvmgen/}& LLVMコード生成
\\
\code{llvmemit/}& LLVMコードエミッション
\end{tabular}

\item コンパイル環境設定，ユーテリティ

\begin{tabular}{ll}
\code{builtin2/}& コンパイラ組込環境
\\
\code{control/}& コンパイラ制御パラメタ
\\
\code{name/}& シンボル及びIDの定義
\\
\code{util/}& ユーティリティライブラリ
\\
\code{toolchain/}& Unixのtoolchainバインディング
\\
\code{usererror/}& エラー登録処理
\end{tabular}

\item 将来再インストールする予定のモジュール

\begin{tabular}{ll}
\code{functionlocalize/}& 関数局所化最適化
\\
\code{recordunboxing/}& レコードUnbox最適化
\\
\code{staticanalysis/}& 静的コード解析
\end{tabular}
\end{enumerate}
\else%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

	This is the source directory of the \smlsharp{} compiler
function containg the following.

\begin{enumerate}
\item 
	Compiler intermediate languages.

\begin{tabular}{ll}
\code{absyn/}& the abstract syntax tree
\\
\code{constantterm/}& constant definitions
\\
\code{patterncalc/}& the untyped intermediate language
\\
\code{types/}& type definitions, the id-based scope-free untyped intermediate language
\\
\code{typedcalc/}& the typed intermediate language
\\
\code{recordcalc/}& the typed record calculus
\\
\code{typedlambda/}& the typed lambda calculus
\\
\code{bitmapcalc/}& the typed intermediate language with explicit layout bitmap
\\
\code{closurecalc/}& the typed intermediate language with explicit closures
\\
\code{runtimetypes/}& runtime type definitions
\\
\code{runtimecalc/}& the typed intermediate language with runtime types
\\
\code{anormal/}& the A-normal forms
\\
\code{machinecode/}& the low-level intermediate language
\\
\code{llvmir/}& the LLVM code
\end{tabular}

\item Compilation phases

\begin{tabular}{ll}
\code{main/}& main function
\\
\code{toplevel2/}& compiler top-level
\\
\code{parser2/}& parser
\\
\code{loadfile/}& interface loading
\\
\code{generatemain/}& main function name generation
\\
\code{elaborate/}& syntactic elaboration
\\
\code{nameevaluation/}& name evaluation and module compilation
\\
\code{valrecoptimization/}& mutual recursive function optimization
\\
\code{reflection/}& compile-time reflection and printer code generation
\\
\code{typeinference2/}& type definition，uncurry optimization
\\
\code{typedcalcoptimization/}& typed intermediate language optimization
\\
\code{matchcompilation/}& pattern matching compilation
\\
\code{sqlcompilation/}& type-directed SQL server-declaration compilation
\\
\code{fficompilation/}& C interface generation for higher-order functions
\\
\code{recordcompilation/}& type-directed record compilation
\\
\code{recordcalcoptimization/}& typed record calculus optimization
\\
\code{datatypecompilation/}& datalayout computation
\\
\code{bitmapcompilation2/}& explicit layout-bitmap generation
\\
\code{closureconversion/}& closure conversion
\\
\code{cconvcompile/}& type-directed calling-convention generation
\\
\code{anormalize/}& a-normalization
\\
\code{machinecodegen/}&  law-level code generation
\\
\code{stackallocation/}& stack frame allocation
\\
\code{llvmgen/}& llvm code generation
\\
\code{llvmemit/}& llvm code emmition
\end{tabular}

\item Compiling environments and utilities

\begin{tabular}{ll}
\code{builtin2/}& the compiler built-in environment
\\
\code{control/}& compilation parameters
\\
\code{name/}& symbol and idntifier definitoions
\\
\code{util/}& compiler utilities
\\
\code{toolchain/}& Unix toolchain bindings
\\
\code{usererror/}& error handling
\end{tabular}

\item modules to be installed in future

\begin{tabular}{ll}
\code{functionlocalize/}& function localization optimization
\\
\code{recordunboxing/}& record unboxing optimization
\\
\code{staticanalysis/}& static intermediate language analysis for optimization
\end{tabular}
\end{enumerate}
\fi%%%%<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

\ifjp%>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
	\code{src}下の各サブディレクトリは，\code{main}サブディレクトリ
を含み，このディレクトリ以下にソースファイルが置かれている．
	従って，例えば抽象構文木のソースファイルは\code{absyn/main/}下に
置かれている．
	この構成は，各コンパイラの構成要素の検証やテストのためのリソース
を配置することを意図したものである．
	現時点では，各サブディレクトリは\code{main}以外のディレクトリを
持たない．

	\code{xxx/main/}以下には，通常，拡張子\code{.sml}を持つソースファ
イルと拡張子\code{.smi}を持つ同名のインターフェイスファイルを含む．
	以下の拡張子を持つファイルは，ソースファイルを生成するための入力
ファイルである．

\begin{tabular}{ll}
\code{.ppg} &
\code{smlformat}の入力ファイル．
プリンターコードが自動生成される．
通常，データ型定義ファイルである．
\\
\code{.grm} &
\code{smlyacc}の入力ファイル．
\\
\code{.lex} &
\code{smllex}の入力ファイル．
\end{tabular}

	\code{make}システムで\smlsharp{}をビルドする過程で，これらのファ
イル対するソースファイルが生成される．
	ディレクトリに用意されている\code{.smi}が付加したインターフェイ
スファイルは，自動生成されたソースファイルのインタフェイス記述である．
\else%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\code{src}下の各サブディレクトリは，\code{main}サブディレクトリ
を含み，このディレクトリ以下にソースファイルが置かれている．
	従って，例えば抽象構文木のソースファイルは\code{absyn/main/}下に
置かれている．
	この構成は，各コンパイラの構成要素の検証やテストのためのリソース
を配置することを意図したものである．
	現時点では，各サブディレクトリは\code{main}以外のディレクトリを
持たない．

	\code{xxx/main/}以下には，通常，拡張子\code{.sml}を持つソースファ
イルと拡張子\code{.smi}を持つ同名のインターフェイスファイルを含む．
	以下の拡張子を持つファイルは，ソースファイルを生成するための入力
ファイルである．
\begin{itemize}
\item \code{.ppg} \code{smlformat}の入力ファイル．
	プリンターコードが自動生成される．
	通常，データ型定義ファイルである．
\item \code{.grm} \code{smlyacc}の入力ファイル．
\item \code{.lex} \code{smllex}の入力ファイル．
\end{itemize}
	\code{make}システムで\smlsharp{}をビルドする仮定で，これらのファ
イル対するソースファイルが生成される．
	ディレクトリに用意されている\code{.smi}が付加したインターフェイ
スファイルは，自動生成されたソースファイルのインタフェイス記述である．
\fi%%%%<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

\section{\txt{\code{basis}ディレクトリ}{The \code{basis} Directory}}
\ifjp%>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
	基本ライブラリのソースファイルである．
	\code{main}ディレクトリ以下に以下のファイルを含む．

\begin{enumerate}
\item シグネチャファイル．
	拡張子\code{.sig}を持つ以下のファイル．
	ファイル名がシグネチャ名に対応している．

\begin{tabular}{l}
\code{ARRAY.sig}\\
\code{ARRAY\_SLICE.sig}\\
\code{BIN\_IO.sig}\\
\code{BOOL.sig}\\
\code{BYTE.sig}\\
\code{CHAR.sig}\\
\code{COMMAND\_LINE.sig}\\
\code{DATE.sig}\\
\code{GENERAL.sig}\\
\code{IEEE\_REAL.sig}\\
\code{IMPERATIVE\_IO.sig}\\
\code{INTEGER.sig}\\
\code{INT\_INF.sig}\\
\code{IO.sig}\\
\code{LIST.sig}\\
\code{LIST\_PAIR.sig}\\
\code{MATH.sig}\\
\code{MONO\_ARRAY.sig}\\
\code{MONO\_ARRAY\_SLICE.sig}\\
\code{MONO\_VECTOR.sig}\\
\code{MONO\_VECTOR\_SLICE.sig}\\
\code{OPTION.sig}\\
\code{OS.sig}\\
\code{OS\_FILE\_SYS.sig}\\
\code{OS\_IO.sig}\\
\code{OS\_PATH.sig}\\
\code{OS\_PROCESS.sig}\\
\code{PRIM\_IO.sig}\\
\code{REAL.sig}\\
\code{STREAM\_IO.sig}\\
\code{STRING.sig}\\
\code{STRING\_CVT.sig}\\
\code{SUBSTRING.sig}\\
\code{TEXT.sig}\\
\code{TEXT\_IO.sig}\\
\code{TEXT\_STREAM\_IO.sig}\\
\code{TIME.sig}\\
\code{TIMER.sig}\\
\code{VECTOR.sig}\\
\code{VECTOR\_SLICE.sig}\\
\code{WORD.sig}
\end{tabular}

\item 共通コード

\begin{tabular}{l}
\code{ArraySlice\_common.sml}\\
\code{Array\_common.sml}\\
\code{VectorSlice\_common.sml}\\
\code{Vector\_common.sml}
\end{tabular}

\item 基本ライブラリストラクチャファイル．
	以下の各基本ライブラリストラクチャ名$S$に対して，
	ソースファイル\code{$S$.sml}とインタフェイスファイル
\code{$S$.smi}が含まれる．

\begin{tabular}{ll}
\code{Array}& \\
\code{ArraySlice}& \\
\code{Bool}& \\
\code{Byte}& \\
\code{Char}& \\
\code{CharArray}& \\
\code{CharArraySlice}& \\
\code{CharVector}& \\
\code{CharVectorSlice}& \\
\code{CommandLine}& \\
\code{Date}& \\
\code{General}& \\
\code{IEEEReal}& \\
\code{IO}& \\
\code{Int}& \\
\code{IntInf}& \\
\code{List}& \\
\code{ListPair}& \\
\code{OS}& \\
\code{Option}& \\
\code{Real}& \\
\code{Real32}& \\
\code{String}& \\
\code{StringCvt}& \\
\code{Substring}& \\
\code{Text}& \\
\code{Time}& \\
\code{Timer}& \\
\code{Vector}& \\
\code{VectorSlice}& \\
\code{Word}& \\
\code{Word8}& \\
\code{Word8Array}& \\
\code{Word8ArraySlice}& \\
\code{Word8Vector}& \\
\code{Word8VectorSlice}
\end{tabular}

\begin{tabular}{ll}
\code{Array}& \\
\code{ArraySlice}& \\
\code{Bool}& \\
\code{Byte}& \\
\code{Char}& \\
\code{CharArray}& \\
\code{CharArraySlice}& \\
\code{CharVector}& \\
\code{CharVectorSlice}& \\
\code{CommandLine}& \\
\code{Date}& \\
\code{General}& \\
\code{IEEEReal}& \\
\code{IO}& \\
\code{Int}& \\
\code{IntInf}& \\
\code{List}& \\
\code{ListPair}& \\
\code{OS}& \\
\code{Option}& \\
\code{Real}& \\
\code{Real32}& \\
\code{String}& \\
\code{StringCvt}& \\
\code{Substring}& \\
\code{Text}& \\
\code{Time}& \\
\code{Timer}& \\
\code{Vector}& \\
\code{VectorSlice}& \\
\code{Word}& \\
\code{Word8}& \\
\code{Word8Array}& \\
\code{Word8ArraySlice}& \\
\code{Word8Vector}& \\
\code{Word8VectorSlice} & \\
\end{tabular}

\item \smlsharp{}依存のライブラリ

\begin{tabular}{ll}
\code{SMLSharp\_Runtime} & \smlsharp{}実行時プリミティブ
\\
\code{SMLSharp\_OSFileSys} & \code{OS}ストラクチャ用プリミティブ
\\
\code{SMLSharp\_OSIO} & \code{OS}ストラクチャ用プリミティブ
\\
\code{SMLSharp\_OSProcess} & \code{OS}ストラクチャ用プリミティブ
\\
\code{SMLSharp\_RealClass} & \code{Real}ストラクチャ用プリミティブ
\\
\code{SMLSharp\_ScanChar}  & 各ストラクチャの\code{scan}関数用のプリミティブ
\\
\code{SMLSharp\_OSPath} & 現在未使用
\end{tabular}

\item トップレベル．

\begin{tabular}{ll}
\code{toplevel.sml} & トップレベルの名前（型，変数）を定義
\\
\code{toplevel.smi} & 基本ライブラリをユーザに提供するためのインターフェイスファイル．
\end{tabular}
\end{enumerate}
\else%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\fi%%%%<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

\section{\txt{\code{compiler-utils}ディレクトリ}{The \code{compiler-utils} Directory}}
\ifjp%>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
	ユーザとコンパイラ共通のライブラリを格納するディレクトリ．
	現時点では，以下のライブラリを含む．

\begin{enumerate}
\item red-black木を基にした辞書ユーテリティ\code{evn}．

	\code{env/main}ディレクトリ下に以下のファイルを含む．
\begin{enumerate}
\item キーストラクチャ．
	以下の各ストラクチャのソースファイル（\code{.sml}）ファイルと
インターフェイス（\code{.sml}）ファイル．
\begin{tabular}{ll}
\code{IOrd} & \code{int}型のキー\\
\code{SOrd} & \code{string}型のキー\\
\code{LabelOrd} & \code{string}型のレコードラベル．数字であれば数値として比較\\
\code{PathOrd} & \code{string list}型のファイルパス．
\end{tabular}

\item 辞書ストラクチャ．
	以下のストラクチャのソース（\code{.sml}）ファイルとインターフェ
イス（\code{.smi}）ファイルを含む．
\begin{tabular}{ll}
\code{IEnv} & \code{int}型をキーとするマップ
\\
\code{ISet} & \code{int}型をキーとする集合
\\
\code{SEnv} & \code{string}型をキーとするマップ
\\
\code{SSet} & \code{string}型をキーとする集合
\\
\code{LabelEnv} & レコードラベルをキーとするマップ
\\
\code{PathEnv} & ファイルパスをキーとするマップ
\\
\code{PathSet} & ファイルパスをキーとする集合
\end{tabular}
\end{enumerate}
\end{enumerate}

\else%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\fi%%%%<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

\section{\txt{\code{config}ディレクトリ}{The \code{config} Directory}}
\ifjp%>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
	\smlsharp{}コンパイラの\smlsharp{}ソースファイルから，システムパ
ラメタをアクセスするためのライブラリ．
	\code{main}以下に以下のファイルを含む．

\begin{tabular}{ll}
\code{Config.\{smi,sml\}} & システムパラメタ変数
\\
\code{Version.sml.in} & デフォールトシステムパラメタテンプレート．
    このファイルから\code{Version.sml}が生成される．
\end{tabular}
\else%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\fi%%%%<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


\section{\txt{\code{ffi}ディレクトリ}{The \code{ffi} Directory}}
\ifjp%>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
	\smlsharp{}のCとの直接連携機能を利用するためのユーザレベルのサポー
トライブラリ．
	\code{main}ディレクトリ下に以下のファイルを含む．

\begin{tabular}{ll}
\code{DynamicLink.\{smi,sml\}} & \code{dlopen}等，動的リンクライブラリ操作関数
\\
\code{Pointer.\{smi,sml\}} & Ｃ言語で生成されたオブジェクト操作関数
\end{tabular}
\else%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\fi%%%%<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<


\section{\txt{\code{llvm}ディレクトリ}{The \code{llvm} Directory}}
\ifjp%>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
	LLVMコード生成器サポートライブラリ．
	\code{main}下に以下のファイルを含む．

\begin{tabular}{ll}
\code{LLVM.\{smi,sml\}} & 
コンパイラの\smlsharp{}ソースファイルがLLVM APIをアクセスするための
ライブラリ．
\\
\code{compile.cpp} & 
\code{precompiled/xxx.ll.xz}にアーカイブされたLLVMアセンブラをコンパイルするためのプログラムソース．
\\
\code{llvm\_support.cpp} & 
\code{LLVM.sml}のための\code{LLVM}スタブ関数群
\end{tabular}
\else%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\fi%%%%<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

\section{\txt{\code{smlnj}ディレクトリ}{The \code{smlnj} Directory}}
\ifjp%>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
	\smlsharp{}が基本ライブラリを実装するために利用している
\code{Standard ML of New Jersey}のソースファイル．
	\code{Basis}下に以下のファイルを含む．

\begin{itemize}
\item \code{IO}

\begin{tabular}{ll}
\code{bin-io\{.sml,smi\}} & バイナリ入出力ストラクチャ\code{BinIO}
\\
\code{prim-io-bin\{.sml,smi\}} & \code{bin-io}のためのプリミティブ
\\
\code{prim-io-text\{.sml,smi\}} & \code{text-io}のためのプリミティブ
\\
\code{text-io\{.sml,smi\}} & テキスト入出力ストラクチャ\code{TextIO}
\end{tabular}

\item \code{OS}

\begin{tabular}{ll}
\code{os-path-fn\{.sml,smi\}} & \code{OS.Path}ストラクチャ生成ファンクタ
\end{tabular}

\item \code{Posix}

\begin{tabular}{ll}
\code{posix-io\{.sml,smi\}} & 
\code{posix-bin-prim-io}および
\code{posix-text-prim-io}
のためのストラクチャ．
\end{tabular}

\item \code{Unix}

\begin{tabular}{ll}
\code{os-path\{.sml,smi\}} & \code{OS.Path}ストラクチャ生成ファンクタ
\\
\code{posix-bin-prim-io\{.sml,smi\}} & \code{BinIO}のためのプリミティブ入出力
\\
\code{posix-text-prim-io\{.sml,smi\}} & \code{TextIO}のためのプリミティブ入出力
\end{tabular}
\end{itemize}

\else%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\fi%%%%<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

\section{\txt{\code{smlnj-lib}ディレクトリ}{The \code{smlnj-lib} Directory}}
\ifjp%>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>
	\smlsharp{}コンパイラで使用しているStandard ML of New Jerseyのユー
ティリティライブラリ．
	\code{Util}下に以下のファイルを含む．

\begin{tabular}{ll}
\code{binary-map-fn\{.sml,smi\}} &
red-black木を用いたマップ生成ファンクタ
\\
\code{binary-set-fn\{.sml,smi\}} &
red-black木を用いた集合ファンクタ
\\
\code{lib-base\{.sml,smi\}} &
\code{smlnj-lib/Util}共通の例外等の定義
\\
\code{lib-base-sig.sml} &
\code{lib-base}のシグネチャ
\\
\code{ord-key-sig\{.sml,smi\}} &
\code{binary-map-fn}の入力キーストラクチャのシグネチャ
\\
\code{ord-map-sig\{.sml,smi\}} &
\code{binary-map-fn}の出力ストラクチャのシグネチャ
\\
\code{ord-set-sig\{.sml,smi\}} &
\code{binary-set-fn}の出力ストラクチャのシグネチャ
\\
\code{parser-comb\{.sml,smi\}} &
パーザコンビネータ
\\
\code{parser-comb-sig.sml} &
\code{parser-comb}のシグネチャ
\end{tabular}
\else%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\fi%%%%<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<

